---
# tasks file for setup_ssh_config
- name: Generate SSH Config File
  template:
    src: ssh_config
    dest: "{{ ansible_env.HOME }}/.ssh/{{ server_name }}"

- name: Adding the path in the zshrc files
  lineinfile:
    dest: "{{ ansible_env.HOME }}/.ssh/config"
    regexp: ^Include \./{{ server_name }}
    line: Include ./{{ server_name }}
    state: present

- name: Adding the path in the zshrc files
  lineinfile:
    dest: "{{ ansible_env.HOME }}/.zshrc"
    regexp: ^export {{ env_var }}=
    line: export {{ env_var }}={{ ansible_host }}
    state: present
