---
# tasks file for setup_ssh_config
- name: Generate SSH Config File
  template:
    src: ssh_config
    dest: ~/.ssh/{{ server_name }}
  delegate_to: localhost

- name: Adding the path in the zshrc files
  lineinfile:
    dest: ~/.ssh/config
    regexp: ^Include \./{{ server_name }}
    line: Include ./{{ server_name }}
    state: present
  delegate_to: localhost

- name: Adding env in the zshrc files
  lineinfile:
    dest: ~/.zshrc
    regexp: ^export {{ env_var }}=
    line: export {{ env_var }}={{ inventory_hostname }}
    state: present
  delegate_to: localhost
